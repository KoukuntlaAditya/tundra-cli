{"version":3,"sources":["../../../src/services/socket.js"],"names":["socket","sendSocketMessage","send","message","console","error","init","port","wss","Server","on","ws","log"],"mappings":";;;;;;;AAAA;;;;AACA;;;;;;;;AAEA,IAAIA,SAAS,IAAb;;AAEO,IAAMC,gDAAoB,SAApBA,iBAAoB,UAAW;AAC1C,MAAID,MAAJ,EAAY;AACVA,WAAOE,IAAP,CAAYC,OAAZ;AACD,GAFD,MAEO;AACLC,YAAQC,KAAR,CAAc,4DAAd;AACD;AACF,CANM;;AAQA,IAAMC;AAAA,qEAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACC,wBADD;;AAAA;AACZC,gBADY;AAEZC,eAFY,GAEN,IAAI,aAAUC,MAAd,CAAqB,EAAEF,UAAF,EAArB,CAFM;;;AAIlBC,gBAAIE,EAAJ,CAAO,YAAP,EAAqB,cAAM;AACzBV,uBAASW,EAAT;AACAP,sBAAQQ,GAAR,CAAY,2CAAZ;AACD,aAHD;;AAJkB,6CASXL,IATW;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAP;;AAAA;AAAA;AAAA;AAAA,GAAN","file":"socket.js","sourcesContent":["import WebSocket from 'ws';\nimport getPort from 'get-port';\n\nlet socket = null;\n\nexport const sendSocketMessage = message => {\n  if (socket) {\n    socket.send(message);\n  } else {\n    console.error('Could not send message. Socket connection not established.');\n  }\n};\n\nexport const init = async () => {\n  const port = await getPort();\n  const wss = new WebSocket.Server({ port });\n\n  wss.on('connection', ws => {\n    socket = ws;\n    console.log('Socket connection established with client');\n  });\n\n  return port;\n};\n"]}